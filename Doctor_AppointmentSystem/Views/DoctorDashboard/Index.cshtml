@model Doctor_AppointmentSystem.ViewModels.DoctorDashboardViewModel

@{
    ViewData["Title"] = "Doctor Dashboard";
    Layout = "~/Views/Shared/_Layout_Doctor.cshtml";
}

<!-- TOP STAT CARDS -->
<div class="stats-grid">
    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Today's Appointments</div>
                <div class="stat-value">@Model.TodaysAppointments</div>
            </div>
        </div>
        <div class="stat-sub">Scheduled for today</div>
    </div>

    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Upcoming</div>
                <div class="stat-value">@Model.UpcomingAppointments</div>
            </div>
        </div>
        <div class="stat-sub">Future confirmed visits</div>
    </div>

    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Completed (This Month)</div>
                <div class="stat-value">@Model.CompletedThisMonth</div>
            </div>
        </div>
        <div class="stat-sub">Finished consultations</div>
    </div>

    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Cancelled / No-Show</div>
                <div class="stat-value">@(@Model.CancelledThisMonth + @Model.NoShowThisMonth)</div>
            </div>
        </div>
        <div class="stat-sub">
            @Model.CancelledThisMonth cancelled · @Model.NoShowThisMonth no-show
        </div>
    </div>

    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Patients Treated</div>
                <div class="stat-value">@Model.TotalPatientsTreated</div>
            </div>
        </div>
        <div class="stat-sub">Unique patients (all time)</div>
    </div>

    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Monthly Revenue</div>
                <div class="stat-value">৳@Model.MonthlyRevenue.ToString("0")</div>
            </div>
        </div>
        <div class="stat-sub">Paid appointments this month</div>
    </div>

    <div class="card stat-card">
        <div class="stat-card-header">
            <div>
                <div class="stat-title">Average Rating</div>
                <div class="stat-value">
                    @Model.AverageRating.ToString("0.0")
                    <span style="font-size:18px;">★</span>
                </div>
            </div>
        </div>
        <div class="stat-sub">@Model.TotalReviews review(s)</div>
    </div>
</div>

<!-- CHARTS (reuse admin styles/JS) -->
<div class="charts-grid">
    <!-- Revenue chart -->
    <div class="card">
        <div class="card-title-row">
            <div>
                <h3>My Revenue Trend</h3>
                <div class="card-title-sub">Monthly total revenue</div>
            </div>
        </div>
        <div class="chart-container">
            <!-- uses the same IDs so admin-dashboard.js will render charts -->
            <canvas id="revenueChart"></canvas>
        </div>
    </div>

    <!-- Appointment trend -->
    <div class="card">
        <div class="card-title-row">
            <div>
                <h3>My Appointment Trend</h3>
                <div class="card-title-sub">Monthly total appointments</div>
            </div>
        </div>
        <div class="chart-container">
            <canvas id="appointmentChart"></canvas>
        </div>
    </div>
</div>

<!-- LOWER GRID: TODAY + UPCOMING + REVIEWS -->
<div class="lower-grid">
    <!-- Today's schedule -->
    <div class="card">
        <div class="card-title-row">
            <div>
                <h3>Today's Schedule</h3>
                <div class="card-title-sub">Quick overview of today's patients</div>
            </div>
        </div>
        <table class="table-simple">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Patient</th>
                    <th>Specialty</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <!-- For now, demo/static rows. Later we will bind real data. -->
                <tr>
                    <td>09:00 AM</td>
                    <td>Demo Patient</td>
                    <td>Cardiology</td>
                    <td><span class="status-pill status-pill--confirmed">Confirmed</span></td>
                </tr>
                <tr>
                    <td>10:30 AM</td>
                    <td>Demo Patient</td>
                    <td>Dermatology</td>
                    <td><span class="status-pill status-pill--completed">Completed</span></td>
                </tr>
                <tr>
                    <td>12:00 PM</td>
                    <td>Demo Patient</td>
                    <td>ENT</td>
                    <td><span class="status-pill status-pill--cancelled">Cancelled</span></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Upcoming appointments -->
    <div class="card">
        <div class="card-title-row">
            <div>
                <h3>Upcoming Appointments</h3>
                <div class="card-title-sub">Next few days</div>
            </div>
        </div>
        <table class="table-simple">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Patient</th>
                    <th>Type</th>
                </tr>
            </thead>
            <tbody>
                <!-- static/demo rows for layout -->
                <tr>
                    <td>Dec 05</td>
                    <td>03:00 PM</td>
                    <td>Demo Patient</td>
                    <td>Follow-up</td>
                </tr>
                <tr>
                    <td>Dec 06</td>
                    <td>11:30 AM</td>
                    <td>Demo Patient</td>
                    <td>New Consultation</td>
                </tr>
                <tr>
                    <td>Dec 07</td>
                    <td>02:15 PM</td>
                    <td>Demo Patient</td>
                    <td>Follow-up</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="lower-grid">
    <!-- Reviews -->
    <div class="card">
        <div class="card-title-row">
            <div>
                <h3>Recent Reviews</h3>
                <div class="card-title-sub">Feedback from your patients</div>
            </div>
        </div>

        <div class="activity-feed">
            <!-- demo reviews – later these will come from DoctorReview table -->
            <div class="activity-item">
                <span class="activity-dot activity-dot--green"></span>
                <div class="activity-main">
                    “Very helpful and explained everything clearly.”
                    <div class="activity-time">5 ★ · 2 days ago</div>
                </div>
            </div>
            <div class="activity-item">
                <span class="activity-dot activity-dot--blue"></span>
                <div class="activity-main">
                    “Clinic was a bit crowded, but consultation was great.”
                    <div class="activity-time">4 ★ · 4 days ago</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick actions -->
    <div class="card">
        <div class="card-title-row">
            <div>
                <h3>Quick Actions</h3>
                <div class="card-title-sub">Frequently used shortcuts</div>
            </div>
        </div>

        <div class="activity-feed">
            <div class="activity-item">
                <span class="activity-dot activity-dot--purple"></span>
                <div class="activity-main">
                    Update weekly schedule
                    <div class="activity-time">
                        <a href="#" class="link-small">Manage schedule</a>
                    </div>
                </div>
            </div>
            <div class="activity-item">
                <span class="activity-dot activity-dot--orange"></span>
                <div class="activity-main">
                    Block off upcoming vacation days
                    <div class="activity-time">
                        <a href="#" class="link-small">Set unavailability</a>
                    </div>
                </div>
            </div>
            <div class="activity-item">
                <span class="activity-dot activity-dot--green"></span>
                <div class="activity-main">
                    Review recent payments
                    <div class="activity-time">
                        <a href="#" class="link-small">View revenue</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
